<div class="p-6 space-y-6">

  <!-- PAGE TITLE + CREATE BUTTON -->
  <div class="flex place-items-center items-center justify-between">
    <h2 class="page-title">Medicines</h2>

    <button
      routerLink="/medicines/create"
      class="btn btn-primary"
    >
      + Add Medicine
    </button>
  </div>

  <!-- SEARCH + RESET BAR -->

    <form class="w-full" (submit)="searchMedicines($event)">
      <label for="search" class="sr-only">Search</label>

      <div class="relative">

        <!-- Icon -->
        <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
          <svg class="w-5 h-5 text-brand" xmlns="http://www.w3.org/2000/svg" fill="none"
               viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-width="2"
                  d="m21 21-3.5-3.5M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"/>
          </svg>
        </div>

        <!-- Input -->
        <input
          [(ngModel)]="searchTerm"
          name="search"
          id="search"
          type="search"
          placeholder="Search medicines..."
          class="input ps-10 placeholder:text-white rounded-full bg-green-soft border-green-soft focus:ring-brand focus:border-brand"
        />

        <!-- Search Button -->
        <button
          type="button"
          (click)="applyFilter()"
          class="btn btn-primary absolute end-20 top-1/2 -translate-y-1/2 rounded-full px-2 py-1.5"
        >
          Search
        </button>

        <!-- Reset Button -->
        <button
          type="button"
          (click)="resetSearch()"
          class="btn btn-primary absolute end-3 top-1/2 -translate-y-1/2 rounded-full px-2 py-1.5"
        >
          Reset
        </button>
      </div>
    </form>

  <!-- ACCORDIONS GROUPED BY CLOSET -->
  <div class="space-y-4">

    <details
      *ngFor="let closet of groupedByCloset | keyvalue : keyValueSorter"
      class="group border rounded-lg p-4"
    >
      <!-- Closet Header -->
      <summary
        class="accordion-header group-open:bg-green-soft group-open:text-white transition-colors duration-300"
      >
        <span class="capitalize">{{ closet.key.replace('_', ' ') }}</span>

        <svg class="size-5 shrink-0 transition-transform duration-300 group-open:-rotate-180"
             xmlns="http://www.w3.org/2000/svg" fill="none"
             viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      </summary>

      <!-- Medicines Inside This Closet -->
      <div class="space-y-2 mt-3 pl-4">

        <div
          *ngFor="let med of closet.value"
          [routerLink]="['/medicines', med.id]"
          class="accordion-item border  border-green-soft rounded-lg px-4 py-3 shadow-md cursor-pointer transition"
        >
          <div>
            <p class="font-semibold text-gray-700">{{ med.med_name }}</p>
            <p class="text-sm text-gray-700">{{ med.scientific_name }}</p>
          </div>

          <p class="font-semibold text-gray-700">
            {{ med.price }} JOD
          </p>
        </div>

      </div>
    </details>

  </div>

</div>
